# Kafka Connect SQS Source Connector - Full Body Decompression
#
# This example demonstrates decompressing the entire SQS message body when
# the complete message is gzip-compressed and Base64-encoded.
#
# Use case: Legacy systems or bandwidth-constrained environments where
# entire messages are compressed before sending to SQS.

# Connector Configuration
name=sqs-full-body-decompression-connector
connector.class=io.connect.sqs.SqsSourceConnector
tasks.max=1

# AWS Configuration
aws.region=us-east-1
# Leave empty to use IAM role / instance profile
aws.access.key.id=
aws.secret.access.key=

# SQS Configuration
sqs.queue.url=https://sqs.us-east-1.amazonaws.com/123456789/compressed-messages
sqs.max.messages=10
sqs.wait.time.seconds=20
sqs.visibility.timeout.seconds=30
sqs.delete.messages=true

# Kafka Configuration
kafka.topic=decompressed-messages
kafka.topic.partition=0

# SCRAM Authentication (Mandatory)
sasl.mechanism=SCRAM-SHA-512
security.protocol=SASL_SSL
sasl.jaas.config=org.apache.kafka.common.security.scram.ScramLoginModule required \
  username="kafka-connect-user" \
  password="${env:KAFKA_PASSWORD}";

# Message Decompression Configuration
message.converter.class=io.connect.sqs.converter.DecompressingMessageConverter

# Delegate to DefaultMessageConverter after decompression
message.decompression.delegate.converter.class=io.connect.sqs.converter.DefaultMessageConverter

# No field path specified = decompress entire message body
# message.decompression.field.path is omitted

# Auto-detect compression format
message.decompression.format=AUTO

# Enable Base64 decoding
message.decompression.base64.decode=true

# Error Handling
dlq.topic=compressed-messages-dlq
max.retries=3
retry.backoff.ms=1000

# Example SQS message (entire body is compressed and Base64-encoded):
# H4sIAAAAAAAA/6tWKkktLlGyUlAqS8wpTtVRKi1OLYrPTSwpSs2zUgKpBQBZvhNoIwAAAA==
#
# After decompression:
# {"message":"Hello, World!","timestamp":1234567890}
#
# This is then processed by the DefaultMessageConverter and sent to Kafka.
