# SQS Source Connector Configuration for ECS Fargate Deployment
#
# This configuration is designed for running the connector in AWS ECS Fargate
# where the task role provides AWS credentials automatically.
#
# Prerequisites:
# 1. ECS task execution role with permissions:
#    - sqs:ReceiveMessage
#    - sqs:DeleteMessage
#    - sqs:GetQueueAttributes
#    - sqs:GetQueueUrl
# 2. Task role attached to the ECS task definition
# 3. Kafka cluster accessible from ECS (VPC configuration)

name=sqs-source-connector-ecs
connector.class=io.connect.sqs.SqsSourceConnector
tasks.max=1

# AWS Configuration
# Note: No access key or secret key needed - ECS task role provides credentials
aws.region=us-east-1

# If you need to assume a different role from the task role, uncomment:
# aws.assume.role.arn=arn:aws:iam::123456789012:role/sqs-reader-role
# aws.sts.role.session.name=kafka-connect-sqs-ecs

# SQS Configuration
sqs.queue.url=https://sqs.us-east-1.amazonaws.com/123456789012/your-queue-name
sqs.max.messages=10
sqs.wait.time.seconds=10
sqs.visibility.timeout.seconds=30
sqs.message.attributes.enabled=true
sqs.delete.messages=true

# Kafka Configuration
kafka.topic=sqs-messages

# SCRAM Authentication (MANDATORY)
# These should be injected via environment variables or AWS Secrets Manager
sasl.mechanism=SCRAM-SHA-512
security.protocol=SASL_SSL
sasl.jaas.config=org.apache.kafka.common.security.scram.ScramLoginModule required \
  username="${env:KAFKA_USERNAME}" \
  password="${env:KAFKA_PASSWORD}";

# If using AWS MSK with IAM authentication instead of SCRAM:
# security.protocol=SASL_SSL
# sasl.mechanism=AWS_MSK_IAM
# sasl.jaas.config=software.amazon.msk.auth.iam.IAMLoginModule required;
# sasl.client.callback.handler.class=software.amazon.msk.auth.iam.IAMClientCallbackHandler

# Error Handling
dlq.topic=sqs-dlq
max.retries=3
retry.backoff.ms=1000

# Polling Configuration
poll.interval.ms=1000

# Message Format
message.converter.class=io.connect.sqs.converter.DefaultMessageConverter
