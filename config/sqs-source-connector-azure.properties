# SQS Source Connector Configuration for Azure Deployment
#
# This configuration is for running the connector on Azure (VMs, AKS, Container Instances)
# accessing AWS SQS.
#
# AWS credentials are provided via static keys or Azure Key Vault integration.

name=sqs-source-connector-azure
connector.class=io.connect.sqs.SqsSourceConnector
tasks.max=1

# AWS Configuration
# Credentials should be stored in Azure Key Vault and injected as environment variables
# or mounted as files via Azure Key Vault CSI driver

aws.region=us-east-1

# Option 1: Environment variables (recommended with Azure Key Vault)
# Set these in your Azure deployment:
# - AWS_ACCESS_KEY_ID from Key Vault secret
# - AWS_SECRET_ACCESS_KEY from Key Vault secret
# The connector will automatically pick them up

# Option 2: Static credentials (from Azure Key Vault or configuration)
# aws.access.key.id=${env:AWS_ACCESS_KEY_ID}
# aws.secret.access.key=${env:AWS_SECRET_ACCESS_KEY}

# Option 3: Credentials file mounted from Azure Key Vault
# aws.credentials.profile=azure-prod
# aws.credentials.file.path=/mnt/secrets/aws-credentials

# SQS Configuration
sqs.queue.url=https://sqs.us-east-1.amazonaws.com/123456789012/your-queue-name
sqs.max.messages=10
sqs.wait.time.seconds=10
sqs.visibility.timeout.seconds=30
sqs.message.attributes.enabled=true
sqs.delete.messages=true

# Kafka Configuration
kafka.topic=sqs-messages

# SCRAM Authentication (MANDATORY)
# Credentials from Azure Key Vault
sasl.mechanism=SCRAM-SHA-512
security.protocol=SASL_SSL
sasl.jaas.config=org.apache.kafka.common.security.scram.ScramLoginModule required \
  username="${env:KAFKA_USERNAME}" \
  password="${env:KAFKA_PASSWORD}";

# Error Handling
dlq.topic=sqs-dlq
max.retries=3
retry.backoff.ms=1000

# Polling Configuration
poll.interval.ms=1000

# Message Format
message.converter.class=io.connect.sqs.converter.DefaultMessageConverter

# Azure-specific notes:
# 1. Use Azure Key Vault to store AWS and Kafka credentials
# 2. Use Azure Key Vault CSI driver for AKS deployments
# 3. Set AWS_EC2_METADATA_DISABLED=true to prevent AWS SDK from trying EC2 metadata
# 4. Ensure outbound connectivity to AWS SQS endpoints
# 5. Consider using Azure Private Link for AWS connectivity
